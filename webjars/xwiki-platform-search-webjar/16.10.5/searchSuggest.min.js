'use strict';define("search-suggest-messages",{keys:["core.widgets.suggest.noResults","core.widgets.suggest.showResults","platform.search.suggestResultLocatedIn"]});
var XWiki=function(b){b.SearchSuggest=Class.create({initialize:function(a,c){require(["xwiki-l10n!search-suggest-messages"],d=>{this._l10n=d;this.sources=c;if(this.searchInput=$(a))document.observe("xwiki:suggest:clearSuggestions",this.onClearSuggestions.bindAsEventListener(this)),document.observe("xwiki:suggest:containerCreated",this.onSuggestContainerCreated.bindAsEventListener(this)),document.observe("xwiki:suggest:containerPrepared",this.onSuggestContainerPrepared.bindAsEventListener(this)),document.observe("xwiki:suggest:updated",
this.onSuggestUpdated.bindAsEventListener(this)),document.observe("xwiki:suggest:selected",this.onSuggestionSelected.bindAsEventListener(this)),document.observe("xwiki:suggest:collapsed",this.onSuggestCollapsed.bindAsEventListener(this)),this.createSuggest()})},onClearSuggestions:function(a){a.memo.suggest==this.suggest&&this.searchInput.setStyle({borderBottomStyle:this.searchInputBorderBottomSavedStyle})},onSuggestContainerCreated:function(a){a.memo.suggest==this.suggest&&(this.searchInputBorderBottomSavedStyle=
this.searchInput.getStyle("borderBottomStyle"),this.searchInput.setStyle({borderBottomStyle:"none"}))},onSuggestContainerPrepared:function(a){this.noResultsMessage.addClassName("hidden")},onSuggestUpdated:function(a){1===a.memo.container.select(".suggestItem").length&&this.noResultsMessage.removeClassName("hidden").setStyle({"float":"left"})},onSuggestionSelected:function(a){a.memo.suggest==this.suggest&&(a.stop(),a.memo.originalEvent&&Event.stop(a.memo.originalEvent),a.memo.url?window.location=a.memo.url:
this.searchInput.up("form").submit())},onSuggestCollapsed:function(a){this.suggest.resetTimeout($("#headerglobalsearchinput").css("transition-duration"))},createSuggest:function(){var a=(new Element("div")).insert(new Element("span",{"class":"suggestId"})).insert(new Element("span",{"class":"suggestValue"})).insert(new Element("span",{"class":"suggestInfo"}));this.noResultsMessage=(new Element("div",{"class":"hidden"})).update(this._l10n["core.widgets.suggest.noResults"].escapeHTML());var c=(new Element("div")).update(this._l10n["core.widgets.suggest.showResults"].escapeHTML());
c=(new Element("div")).insert(this.noResultsMessage).insert(c).insert(new Element("div",{"class":"clearfloats"}));a=new b.widgets.XList([new b.widgets.XListItem(c,{containerClasses:"suggestItem",classes:"showAllResults",eventCallbackScope:this,noHighlight:!0,value:a,containerTagName:"button"})],{classes:"suggestList",eventListeners:{mouseover:function(d){this.suggest.setHighlight(d.currentTarget)}}});c=a.getElement();a.items[0].getElement().addEventListener("focusin",d=>this.suggest.setHighlight($(d.currentTarget)));
this.suggest=new b.widgets.Suggest(this.searchInput,{parentContainer:$("globalsearch"),className:"searchSuggest horizontalLayout",fadeOnClear:!1,align:"auto",minchars:3,sources:this.sources,insertBeforeSuggestions:(new Element("div",{"class":"results"})).update(c),displayValue:!0,displayValueText:this._l10n["platform.search.suggestResultLocatedIn"],resultInfoHTML:!0,timeout:0,width:500,unifiedLoader:!0,loaderNode:c.down("li"),shownoresults:!1,propagateEventKeyCodes:[Event.KEY_RETURN]})}});const f=
(new b.Document(b.Model.resolve("XWiki.SearchSuggestCode",b.EntityType.DOCUMENT))).getURL("get");var e=async function(){var a=await (await fetch(f)).json();new b.SearchSuggest($("headerglobalsearchinput"),a);return!0};b.isInitialized&&e()||document.observe("xwiki:dom:loading",e);return b}(XWiki);
//# sourceMappingURL=searchSuggest.min.js.map
