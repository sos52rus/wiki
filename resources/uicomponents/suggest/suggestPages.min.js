/*
 */
'use strict';(function(q,m){define("xwiki-suggestPages",["jquery","xwiki-selectize"],function(d){m=m||"WebHome";var k=function(b){return{create:!0,documentReference:b.data("documentReference"),searchScope:b.data("searchScope"),searchField:["searchValue","label","hint"],load:function(a,c){var e=this.settings;d.getJSON(h(e.searchScope),d.param({q:a,scope:["name","title"],number:10,localeAware:!0,prettyNames:!0},!0)).then(r.bind(null,e)).then(c,c)},loadSelected:function(a,c){n(a,this.settings).then(c,
c)}}},n=function(b,a){b=XWiki.Model.resolve(b,XWiki.EntityType.DOCUMENT,a.documentReference);b=(new XWiki.Document(b)).getRestURL();return d.getJSON(b,d.param({prettyNames:!0})).then(p.bind(null,a)).then(function(c){return[c]})},h=function(b){var a=b.getReversedReferenceChain().filter(function(c){return c.type===XWiki.EntityType.SPACE}).map(function(c){return c.name});b=b.extractReferenceValue(XWiki.EntityType.WIKI);return XWiki.Document.getRestSearchURL("",a,b)},r=function(b,a){return Array.isArray(a.searchResults)?
a.searchResults.map(p.bind(null,b)):[]},p=function(b,a){var c=XWiki.Model.resolve(a.id,XWiki.EntityType.DOCUMENT),e=c.relativeTo(b.documentReference.getRoot()),g=b=XWiki.Model.serialize(e),f=a.hierarchy.items;a=f.pop().label;c.name===m&&(a=f.pop().label,g=XWiki.Model.serialize(e.parent));e=f.filter(function(l){return"space"===l.type}).map(function(l){return l.label}).join(" / ");return{value:b,searchValue:g,label:a,hint:e,icon:q,url:(new XWiki.Document(c)).getURL()}};d.fn.suggestPages=function(b){return this.each(function(){var a=
d.extend(k(d(this)),b),c=d(this),e=c.xwikiSelectize;a.documentReference&&"string"!==typeof a.documentReference||(a.documentReference=XWiki.Model.resolve(a.documentReference,XWiki.EntityType.DOCUMENT,XWiki.currentDocument.documentReference));a:{var g=a.searchScope||"wiki:"+XWiki.currentWiki;if("string"===typeof g)try{var f=XWiki.Model.resolve(g,null,XWiki.currentDocument.documentReference);break a}catch(l){f=null;break a}f=g}a.searchScope=f;e.call(c,a)})}});require(["jquery","xwiki-suggestPages","xwiki-events-bridge"],
function(d){var k=function(n,h){d(h&&h.elements||document).find(".suggest-pages").suggestPages()};d(document).on("xwiki:dom:loaded xwiki:dom:updated",k);d(k)})}).apply("",[{"iconSetName":"Font Awesome","cssClass":"fa fa-file-o","iconSetType":"FONT","url":""},"WebHome"]);
//# sourceMappingURL=suggestPages.min.js.map
