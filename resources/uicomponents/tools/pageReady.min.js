'use strict';(function(){(function(d){document.documentElement.setAttribute("data-xwiki-page-ready",!1);const f=new Set,h=function(a){if(a instanceof Request)return a.url;if(a instanceof URL)return a.href;if("string"===typeof a)return(new URL(a,window.location)).href};let g,k;const m=[function(){let a;d.delayPageReady(new Promise((b,c)=>{"complete"===document.readyState?b():window.addEventListener("load",a=b)}),"window:load");return()=>{window.removeEventListener("load",a)}}(),function(){const a=
window.XMLHttpRequest.prototype.open;if(a!==g)return g=window.XMLHttpRequest.prototype.open=function(){try{const b=h(arguments[1]);d.delayPageReady(new Promise((c,e)=>{this.addEventListener("load",()=>{f.add(b)});this.addEventListener("loadend",c)}),`xhr:${b}`)}catch(b){}return a.apply(this,arguments)},()=>{}}(),function(){const a=window.fetch;if(a!==k)return k=window.fetch=function(){const b=a.apply(this,arguments);try{const c=h(arguments[0]);d.delayPageReady(b.then(()=>{f.add(c)}),`fetch:${c}`)}catch(c){}return b},
()=>{}}(),function(){const a=new MutationObserver(b=>{b.forEach(c=>{c.addedNodes.forEach(e=>{const l=e.src;if("SCRIPT"===e.tagName&&"string"===typeof l&&""!==l&&!f.has(h(l))){const n=h(l);d.delayPageReady(new Promise((p,q)=>{e.addEventListener("load",()=>{f.add(n);p()});e.addEventListener("error",q)}),`script:${n}`)}})})});a.observe(document.querySelector("head"),{childList:!0});return()=>{a.disconnect()}}()];d.afterPageReady(()=>{m.forEach(a=>a());document.documentElement.setAttribute("data-xwiki-page-ready",
!0)})})(function(){let d,f=new Promise(b=>{d=b}),h=0,g=new Map,k,m=(b,c)=>{clearTimeout(k);const e=h++;g.set(e,c);b.catch(()=>{}).finally(()=>{g.delete(e);g.size||(k=setTimeout(d,10))})};var a=b=>{f=f.then(b).catch(()=>{})};a(()=>{m=()=>{}});a={delayPageReady:function(){return m.apply(this,arguments)},getPendingDelays:()=>new Map(g),afterPageReady:a};define("xwiki-page-ready",a);return a}())})();
//# sourceMappingURL=pageReady.min.js.map
