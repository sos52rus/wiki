'use strict';require(["jquery"],function(d){var u=function(e){var a=this;a.selectWidget=d(e);a.triggerSelectionChange=function(){a.selectWidget.trigger("xwiki:select:updated",{elements:a.selectWidget[0]})};a.onOptionHovered=function(){a.changeHighlight(d(this),!0)};a.onOptionClicked=function(){var b=d(this),c=b.find("input");c.prop("checked")||(c.prop("checked",!0),c=a.selectWidget.find(".xwiki-select-option-selected"),c.removeClass("xwiki-select-option-selected"),c.removeAttr("aria-selected"),(c=
a.selectWidget.find(".xwiki-select-option-highlighted"))&&c.removeClass("xwiki-select-option-highlighted"),b.parent().parent().attr("aria-activedescendant",b.attr("id")),a.changeHighlight(b),b.addClass("xwiki-select-option-selected"),b.attr("aria-selected","true"),a.triggerSelectionChange())};a.changeHighlight=function(b,c){b||=a.selectWidget.find(".xwiki-select-option-selected");let f=a.selectWidget.find(".xwiki-select-option-highlighted");f.removeClass("xwiki-select-option-highlighted");f.removeAttr("tabindex");
b.addClass("xwiki-select-option-highlighted");b.attr("tabindex",0);c||b.focus()};a.onOptionSelectHighlighted=function(){a.selectWidget.find(".xwiki-select-option-highlighted").trigger("click")};a.onOptionLeftKeyPressed=function(){var b=a.selectWidget.find(".xwiki-select-option-highlighted");let c=d(".xwiki-select-option:visible");if((b=c.eq(c.index(b)-1))&&d.contains(a.selectWidget.get(0),b.get(0)))a.changeHighlight(b);else a.onOptionEndKeyPressed()};a.onOptionRightKeyPressed=function(){var b=a.selectWidget.find(".xwiki-select-option-highlighted");
let c=d(".xwiki-select-option:visible");if((b=c.eq(c.index(b)+1))&&d.contains(a.selectWidget.get(0),b.get(0)))a.changeHighlight(b);else a.onOptionHomeKeyPressed()};a.onOptionUpKeyPressed=function(){var b=a.selectWidget.find(".xwiki-select-option-highlighted");let c=d();d(".xwiki-select-category").each(function(f){c=c.add(d(this).find(".xwiki-select-option:visible:eq(0)"))});(b=c.eq(c.index(b)-1))&&d.contains(a.selectWidget.get(0),b.get(0))?a.changeHighlight(b):(b=a.selectWidget.find(".xwiki-select-category .xwiki-select-option:nth-child(2)").last(),
a.changeHighlight(b))};a.onOptionDownKeyPressed=function(){var b=a.selectWidget.find(".xwiki-select-option-highlighted");let c=d();d(".xwiki-select-category").each(function(f){c=c.add(d(this).find(".xwiki-select-option:visible:eq(0)"))});if((b=c.eq(c.index(b)+1))&&d.contains(a.selectWidget.get(0),b.get(0)))a.changeHighlight(b);else a.onOptionHomeKeyPressed()};a.onOptionHomeKeyPressed=function(){a.changeHighlight(a.selectWidget.find(".xwiki-select-option:visible").first())};a.onOptionEndKeyPressed=
function(){a.changeHighlight(a.selectWidget.find(".xwiki-select-option:visible").last())};a.onOptionKeyPressed=function(b){let c=!0;switch(b.keyCode){case 37:a.onOptionLeftKeyPressed();break;case 39:a.onOptionRightKeyPressed();break;case 38:a.onOptionUpKeyPressed();break;case 40:a.onOptionDownKeyPressed();break;case 13:case 32:a.onOptionSelectHighlighted();break;case 36:a.onOptionHomeKeyPressed();break;case 35:a.onOptionEndKeyPressed();break;default:c=!1}c&&b.preventDefault()};a.onFilterChange=function(){for(var b=
d(this).val().split(" "),c=0,f=a.selectWidget.find(".xwiki-select-category"),l=0;l<f.length;++l){for(var g=d(f[l]),r=g.find(".xwiki-select-option"),m=0,n=0;n<r.length;++n){var h=d(r[n]),p=h.find("label").text().toLowerCase(),k=h.find(".xHint").text().toLowerCase();p=p+" "+k;k=!0;for(var q=0;q<b.length;++q){var t=b[q].toLowerCase();if(-1==p.indexOf(t)){k=!1;break}}k?(h.show(),m++):h.hide()}g.find(".xwiki-select-category-count").text(m);0==m?g.hide():(g.show(),c++)}0==c?0==a.selectWidget.find(".xwiki-select-no-results").length&&
a.selectWidget.find(".xwiki-select-options").append('<p class="xwiki-select-no-results">\u041D\u0435\u0442 \u043F\u043E\u0434\u0445\u043E\u0434\u044F\u0449\u0435\u0433\u043E \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0430...</p>'):a.selectWidget.find(".xwiki-select-no-results").remove()};a.init=function(){a.selectWidget.find(".xwiki-select-option").on("click",a.onOptionClicked);a.selectWidget.find(".xwiki-select-option").on("mouseenter",a.onOptionHovered);a.selectWidget.find(".xwiki-select-options").on("keydown",a.onOptionKeyPressed);
a.selectWidget.find("input.xwiki-select-filter").on("change",a.onFilterChange).on("keyup",a.onFilterChange)};a.clearSelection=function(){a.selectWidget.find(".xwiki-select-option-selected").removeClass("xwiki-select-option-selected");a.selectWidget.find('input[type="radio"]:checked').prop("checked",!1);a.triggerSelectionChange()};a.getValue=function(){return a.selectWidget.find('input[type="radio"]:checked').val()};a.init()};d.fn.xwikiSelectWidget=function(e){if(!e||"init"==e)for(e=0;e<this.length;++e){var a=
this[e];d(a).data("xwikiSelectWidget")||d(a).data("xwikiSelectWidget",new u(a)).attr("data-ready",!0)}else if("clearSelection"==e)for(e=0;e<this.length;++e)d(this[e]).data("xwikiSelectWidget").clearSelection();else if("getValue"==e)return d(this[0]).data("xwikiSelectWidget").getValue();return this};d(document).on("xwiki:dom:updated",(e,a)=>{d(a?.elements||[document.documentElement]).find(".xwiki-select").xwikiSelectWidget()});d(function(){d(".xwiki-select").xwikiSelectWidget()})});
//# sourceMappingURL=select.min.js.map
